# Configuration pour la cross-compilation

# macOS (Apple Silicon) - Cible par défaut sur votre machine
[target.aarch64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]

# macOS (Intel)
[target.x86_64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]

# Linux AMD64 (Standard)
# Nécessite un linker si compilé depuis macOS (ex: x86_64-unknown-linux-gnu-gcc)
# [target.x86_64-unknown-linux-gnu]
# linker = "x86_64-unknown-linux-gnu-gcc"

# Windows AMD64 (Via MinGW pour cross-compilation depuis Mac/Linux)
[target.x86_64-pc-windows-gnu]
linker = "x86_64-w64-mingw32-gcc"

# Milk-V / ARM64 Linux
# Nécessite le toolchain ARM64 (ex: aarch64-unknown-linux-gnu-gcc)
# [target.aarch64-unknown-linux-gnu]
# linker = "aarch64-unknown-linux-gnu-gcc"

# Alias pour simplifier les commandes de build
[alias]
build-mac = "build --release --target aarch64-apple-darwin"
build-linux = "build --release --target x86_64-unknown-linux-gnu"
build-win = "build --release --target x86_64-pc-windows-gnu"
build-milkv = "build --release --target aarch64-unknown-linux-gnu"
build-all = ["build", "--release", "--target", "aarch64-apple-darwin", "--target", "x86_64-unknown-linux-gnu", "--target", "x86_64-pc-windows-gnu", "--target", "aarch64-unknown-linux-gnu"]
